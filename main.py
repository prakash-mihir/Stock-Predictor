import streamlit as st
from datetime import date

import yfinance as yf
from prophet import Prophet
from prophet.plot import plot_plotly
from plotly import graph_objs as go

START = "2015-01-01"
TODAY = date.today().strftime("%Y-%m-%d")

st.title('Stock Forecast App')

stocks = ('3IINFOTEC.NS','ADVANIHOT.NS','AICHAMP.NS','ALLSEC.NS','ALPHAGEO.NS','ALPINEHOU.NS','AMARJOTHI.NS','AMLSTEEL.NS','ANKURDRUG.NS','ANTGRAPHI.NS','ARIHANT.NS','ARROWTEX.NS','ASHAPURMI.NS','ASHCONIUL.NS','ASHIMASYN.NS','ASIANELEC.NS','ASIL.NS','AUSOMENT.NS','AUSTRAL.NS','BAGFILMS.NS','BANARBEAD.NS','BANG.NS','BEARDSELL.NS','BEDMUTHA.NS','BILPOWER.NS','BIRLACOT.NS','BLBLIMITE.NS','BLUECOAST.NS','BODALCHEM.NS','BODHTREE.NS','BROOKS.NS','CALSOFT.NS','CCCL.NS','CELESTIAL.NS','CHESLINTE.NS','CINEVISTA.NS','CLUTCHAUT.NS','COROENGG.NS','CURATECH.NS','CYBERMEDI.NS','DBREALTY.NS','DECOLIGHT.NS','DELTAMAGN.NS','DHANUS.NS','DHUNINV.NS','DSSL.NS','DWARKESH.NS','EDSERV.NS','ELECTHERM.NS','ELNET.NS','EMAMIINFR.NS','EMKAY.NS','EMPEESUG.NS','ENTEGRA.NS','EUROCERA.NS','FCSSOFT.NS','GANGOTRI.NS','GISOLUTIO.NS','GKWLIMITE.NS','GLFL.NS','GUFICBIO.NS','GUJSTATFI.NS','HBLPOWER.NS','HINDMOTOR.NS','HINDSYNTE.NS','HITACHIHO.NS','HOTELRUGB.NS','IBSEC.NS','IITL.NS','INDOSOLAR.NS','INFINITE.NS','INFODRIVE.NS','IOLN.NS','JAIBALAJI.NS','JCTEL.NS','JDORGOCHE.NS','JEYPORE.NS','JUPITER.NS','KALYANIFR.NS','KANANIIND.NS','KANDAGIRI.NS','KARMAENG.NS','KARURKCP.NS','KAUSHALYA.NS','KESARENT.NS','KEYCORPSE.NS','KHAITANLT.NS','KIRIINDUS.NS','KLGSYSTEL.NS','KOPDRUGS.NS','KOTARISUG.NS','KOVAI.NS','KTIL.NS','LAKSHMIFI.NS','LIBERTSHO.NS','LIQUIDBEE.NS','LLOYDSTEE.NS','LYKALABS.NS','MAANALU.NS','MALWACOTT.NS','MARKSANS.NS','MAWANASUG.NS','MBSWITCH.NS','MCDHOLDIN.NS','MELSTAR.NS','MINDACORP.NS','MORARJETE.NS','NAGREEKCA.NS','NCOPPER.NS','NEOCURE.NS','NOL.NS','NOVOPANIN.NS','NUCENT.NS','OSWALMIN.NS','OUDHSUG.NS','PANCHSHEE.NS','PARRYSUGA.NS','PATSPINLT.NS','PEARLPOLY.NS','PILANIINV.NS','PIRLIFE.NS','PRAENG.NS','PRITHVISO.NS','PVP.NS','QUINTEGRA.NS','RAIREKMOH.NS','RAJSREESU.NS','RAMKY.NS','RANASUG.NS','RANKLIN.NS','REGENCERA.NS','REISIXTEN.NS','REMSONSIN.NS','RMMIL.NS','RPGLIFE.NS','RSWM.NS','SABERORGA.NS','SAKHTISUG.NS','SAKTHIFIN.NS','SALONACOT.NS','SAMBHAAV.NS','SAMTEL.NS','SARTHAKIN.NS','SEZAL.NS','SGFL.NS','SGL.NS','SHAHALLOY.NS','SHALPAINT.NS','SHANTIGEA.NS','SHREYANIN.NS','SHREYAS.NS','SHRINATRA.NS','SIL.NS','SIMBHSUGA.NS','SOMATEX.NS','SPENTEX.NS','SPLIL.NS','SRGINFOTE.NS','SRICHAMUN.NS','STERLINBI.NS','STINDIA.NS','SUPERSPIN.NS','SUPREMETE.NS','SURANACOR.NS','SURYAPHAR.NS','TAINWALCH.NS','TAKE.NS','TAKSHEEL.NS','TARAPUR.NS','TCPLTD.NS','TELEDATAI.NS','TEXMOPIPE.NS','THIRUSUGA.NS','TIMESGTY.NS','TNTELE.NS','TRICOM.NS','TTL.NS','UMESLTD.NS','UNIPLY.NS','UNITEDTEA.NS','UPERGANGE.NS','UTTAMSUGA.NS','V2RETAIL.NS','VARDMNPOL.NS','VARUN.NS','VIMTALABS.NS','VINYLINDI.NS','VKSPL.NS','VTMLTD.NS','WALCHANNA.NS','WEBELSOLA.NS','WEIZFOREX.NS','WELGLOB.NS','WELPROJ.NS','ZEENEWS.NS','ZENITHEXP.NS','AKSHOPTFB.NS','ANGIND.NS','ARCHIDPLY.NS','AROGRANIT.NS','ARSSINFRA.NS','ASIANTILE.NS','ATLASCYCL.NS','BECREL.NS','BGLOBAL.NS','BHARATGEA.NS','BILENERGY.NS','BINDALAGR.NS','BROADCAST.NS','BSL.NS','BVCL.NS','CELEBRITY.NS','CTE.NS','CUBEXTUB.NS','DCM.NS','EASUNREYR.NS','FAME.NS','FARMAXIND.NS','GKB.NS','GOLDENTOB.NS','GTNIND.NS','GTNTEX.NS','HALONIX.NS','HBSTOCK.NS','HEXATRADE.NS','HILTON.NS','HINDDORRO.NS','IBWSL.NS','ICIL.NS','IFBAGRO.NS','IGPL.NS','IMPEXFERR.NS','INDIANCAR.NS','INVENTURE.NS','IVP.NS','IVRCLAH.NS','JAINSTUDI.NS','JIKIND.NS','JINDWORLD.NS','JUMBO.NS','KAKATCEM.NS','KHANDSE.NS','KITPLYIND.NS','KLRF.NS','KRISHNAEN.NS','KRITIIND.NS','KSK.NS','LUMAXAUTO.NS','MAITHANAL.NS','MALUPAPER.NS','MANAPPURA.NS','MANGLMCEM.NS','MARALOVER.NS','MUDRA.NS','MUNJALAU.NS','NCLIND.NS','NEHAINT.NS','NEOCORP.NS','NEULANDLA.NS','NSIL.NS','NUTEK.NS','PANASONIC.NS','PARAL.NS','PBAINFRA.NS','PDUMJEIND.NS','PEACOCKIN.NS','PERIATEA.NS','PGEL.NS','PGIL.NS','PIONDIST.NS','PIONEEREM.NS','POLARIND.NS','PRICOL.NS','PROVOGE.NS','RAJRAYON.NS','RASOYPR.NS','REFEX.NS','RSSOFTWAR.NS','SANWARIA.NS','SELMCL.NS','SHILPI.NS','SHIVAMAUT.NS','SHIVTEX.NS','SMOBILITY.NS','SPYL.NS','SRHHYPOLT.NS','STARPAPER.NS','STOREONE.NS','SUJANATOW.NS','SURYAJYOT.NS','SWELECTES.NS','TANFACIND.NS','TCIFINANC.NS','TFL.NS','THINKSOFT.NS','THOMASCOT.NS','TIRUMALCH.NS','VICEROY.NS','VIJSHAN.NS','VLSFINANC.NS','WANBURY.NS','WEIZMANIN.NS','WELINV.NS','WELSPUNIN.NS','WINDMACHI.NS','WINSOME.NS','WSI.NS','WWIL.NS','ZEELEARN.NS','ZENITHCOM.NS','ZODJRDMKJ.NS','20MICRONS.NS','3MINDIA.NS','A2ZMES.NS','AANJANEYA.NS','AARTIDRUG.NS','AARTIIND.NS','AARVEEDEN.NS','ABBOTINDI.NS','ABCIL.NS','ABGSHIP.NS','ABHISHEK.NS','ACE.NS','ACROPETAL.NS','ADFFOODS.NS','ADHUNIK.NS','ADORWELD.NS','ADSL.NS','ADVANTA.NS','AEGISCHEM.NS','AFL.NS','AFTEK.NS','AGCNET.NS','AGRODUTCH.NS','AHLEAST.NS','AHLUCONT.NS','AHLWEST.NS','AHMEDFORG.NS','AIAENG.NS','AJANTPHAR.NS','AJMERA.NS','AKZOINDIA.NS','ALCHEM.NS','ALEMBICLT.NS','ALICON.NS','ALKALI.NS','ALKYLAMIN.NS','ALLCARGO.NS','ALMONDZ.NS','ALPA.NS','ALPSINDUS.NS','ALSTOMT&D.NS','AMAR.NS','AMARAJABA.NS','AMBIKCO.NS','AMDIND.NS','AMRUTANJA.NS','AMTEKAUTO.NS','AMTEKINDI.NS','ANANTRAJ.NS','ANDHRACEM.NS','ANDHRSUGA.NS','ANIKINDS.NS','ANSALAPI.NS','ANSALHSG.NS','APARINDS.NS','APCOTEXIN.NS','APLAB.NS','APLAPOLLO.NS','APLLTD.NS','APOLLOHOS.NS','APPAPER.NS','APTECHT.NS','AQUA.NS','ARCHIES.NS','ARIES.NS','ARSHIYA.NS','ARVINDREM.NS','ASAHIINDI.NS','ASAHISONG.NS','ASAL.NS','ASHIANA.NS','ASHOKA.NS','ASIANHOTN.NS','ASSAMCO.NS','ASTEC.NS','ASTERSILI.NS','ASTRAL.NS','ASTRAMICR.NS','ASTRAZEN.NS','ATFL.NS','ATLANTA.NS','ATNINTER.NS','ATUL.NS','AURIONPRO.NS','AUTOAXLES.NS','AUTOIND.NS','AUTOLITIN.NS','AVANTI.NS','AVTNPL.NS','AXISGOLD.NS','AXIS-IT&T.NS','BAJAJCORP.NS','BAJAJELEC.NS','BAJAJFINS.NS','BAJFINANC.NS','BALAJITEL.NS','BALAMINES.NS','BALKRISIN.NS','BALLARPUR.NS','BALMLAWRI.NS','BALPHARMA.NS','BANARISUG.NS','BANCOINDI.NS','BANKBEES.NS','BANSWRAS.NS','BARTRONIC.NS','BASF.NS','BASML.NS','BAYERCROP.NS','BBL.NS','BBTC.NS','BEPL.NS','BERGEPAIN.NS','BFINVEST.NS','BHAGWATIH.NS','BHAGYNAGA.NS','BHARATFOR.NS','BHARATRAS.NS','BHARTISHI.NS','BIL.NS','BIMETAL.NS','BINANIIND.NS','BIRLACORP.NS','BIRLAERIC.NS','BIRLAMONE.NS','BIRLAPOWE.NS','BLISSGVS.NS','BLKASHYAP.NS','BLUECHIP.NS','BLUEDART.NS','BLUESTARC.NS','BLUESTINF.NS','BOC.NS','BPL.NS','BRANDHOUS.NS','BRFL.NS','BRIGADE.NS','BRITANNIA.NS','BSELINFRA.NS','BSLGOLDET.NS','BSLNIFTY.NS','BSTRANSCO.NS','BURNPUR.NS','CADILAHC.NS','CANDC.NS','CANFINHOM.NS','CANTABIL.NS','CARBORUNI.NS','CAREERP.NS','CASTROL.NS','CCL.NS','CEATLTD.NS','CEBBCO.NS','CENTENKA.NS','CENTEXT.NS','CENTUM.NS','CENTURYPL.NS','CERA.NS','CHEMFALKA.NS','CHENNPETR.NS','CHETTINAD.NS','CHOLAFIN.NS','CHROMATIC.NS','CILNOVA.NS','CIMMCO.NS','CINEPRO.NS','CLASSIC.NS','CLNINDIA.NS','CMAHENDRA.NS','COMPUAGE.NS','COMPUSOFT.NS','CONCOR.NS','CONSOFINV.NS','CORDSCABL.NS','COROMANDE.NS','CORPBANK.NS','COSMOFILM.NS','COX&KINGS.NS','CREATIVEY.NS','CRESTANI.NS','CREWBOS.NS','CRISIL.NS','CRMFGETF.NS','CUB.NS','CYBERTECH.NS','DAAWAT.NS','DALMIABEL.NS','DALMIASUG.NS','DATAMATIC.NS','DBCORP.NS','DBSTOCKBR.NS','DCHL.NS','DCMSRMCON.NS','DCW.NS','DECCANCE.NS','DEEPAKFER.NS','DEEPAKNTR.NS','DEEPIND.NS','DEN.NS','DENORA.NS','DENSO.NS','DHAMPURSU.NS','DHANBANK.NS','DHANUKA.NS','DHARSUGAR.NS','DHFL.NS','DIAPOWER.NS','DICIND.NS','DIGJAM.NS','DISHMAN.NS','DLINKINDI.NS','DOLPHINOF.NS','DONEAR.NS','DPSCLTD.NS','DPTL.NS','DQE.NS','DREDGECOR.NS','DSKULKARN.NS','DUNCANSIN.NS','DYNAMATEC.NS','EASTSILK.NS','ECEIND.NS','EDELWEISS.NS','EDL.NS','EICHERMOT.NS','EIDPARRY.NS','EIHAHOTEL.NS','EIHOTEL.NS','EIMCOELEC.NS','EKC.NS','ELDERPHAR.NS','ELECON.NS','ELECTCAST.NS','ELECTCAST.NS','ELFORGE.NS','ELGIEQUIP.NS','ELGIRUBCO.NS','EMAMILTD.NS','EMCO.NS','EMMBI.NS','ENERGYDEV.NS','ENGINERSI.NS','ENIL.NS','EON.NS','ERAINFRA.NS','EROSMEDIA.NS','ESABINDIA.NS','ESL.NS','ESSARPORT.NS','ESSARSHPN.NS','ESSDEE.NS','ESSELPACK.NS','ESTER.NS','EUROMULTI.NS','EUROTEXIN.NS','EVEREADY.NS','EVERESTIN.NS','EVERONN.NS','EXCELCROP.NS','EXCELINDU.NS','EXCELINFO.NS','FACT.NS','FAGBEARIN.NS','FCH.NS','FDC.NS','FEDDERLOY.NS','FIEMIND.NS','FILATEX.NS','FINCABLES.NS','FINPIPE.NS','FIRSTLEAS.NS','FIRSTWIN.NS','FKONCO.NS','FLEXITUFF.NS','FMGOETZE.NS','FMNL.NS','FOSECOIND.NS','FOURSOFT.NS','FSL.NS','FUTUREVEN.NS','GABRIEL.NS','GAEL.NS','GAL.NS','GALLANTT.NS','GALLISPAT.NS','GAMMNINFR.NS','GAMMONIND.NS','GANDHITUB.NS','GANESHHOU.NS','GARDENSIL.NS','GARWALLRO.NS','GATI.NS','GAYAPROJ.NS','GDL.NS','GEECEE.NS','GEINDSYS.NS','GEMINI.NS','GENESYS.NS','GENUSPOWE.NS','GEODESIC.NS','GEOJITBNP.NS','GEOMETRIC.NS','GHCL.NS','GICHSGFIN.NS','GILLANDER.NS','GILLETTE.NS','GINNIFILA.NS','GIPCL.NS','GITANJALI.NS','GLENMARK.NS','GLOBALVEC.NS','GLOBOFFS.NS','GLOBUSSPR.NS','GLODYNE.NS','GLORY.NS','GMBREW.NS','GNFC.NS','GOACARBON.NS','GODFRYPHL.NS','GODREJCP.NS','GODREJPRO.NS','GOENKA.NS','GOKEX.NS','GOKUL.NS','GOLDBEES.NS','GOLDIAM.NS','GOLDINFRA.NS','GOLDSHARE.NS','GOLDTECH.NS','GPIL.NS','GPPL.NS','GRANULES.NS','GRAPHITE.NS','GRAVITA.NS','GREAVESCO.NS','GREENPLY.NS','GREENPOWE.NS','GRINDWELL.NS','GRUH.NS','GSFC.NS','GSKCONS.NS','GSLNOVA.NS','GSS.NS','GTL.NS','GTLINFRA.NS','GTOFFSHOR.NS','GUJALKALI.NS','GUJAPOLLO.NS','GUJNRECOK.NS','GUJNRECOK.NS','GUJNREDVR.NS','GUJRATGAS.NS','GUJSIDHCE.NS','GULFOILCO.NS','HANUNG.NS','HARITASEA.NS','HARRMALAY.NS','HATHWAY.NS','HCIL.NS','HDFC.NS','HDFCMFGET.NS','HEG.NS','HEIDELBER.NS','HELIOSMAT.NS','HERCULES.NS','HERITGFOO.NS','HFCL.NS','HGS.NS','HIKAL.NS','HIMATSEID.NS','HINDCOMPO.NS','HINDCOPPE.NS','HINDNATGL.NS','HINDUJAFO.NS','HINDUJAVE.NS','HIRAFERRO.NS','HIRECT.NS','HITECHGEA.NS','HITECHPLA.NS','HMT.NS','HMVL.NS','HNGSNGBEE.NS','HOCL.NS','HONAUT.NS','HONDAPOWE.NS','HORIZONIN.NS','HOTELEELA.NS','HOVS.NS','HSIL.NS','HTMEDIA.NS','HUBTOWN.NS','HYDRBADIN.NS','HYDROS&S.NS','IBPOW.NS','ICRA.NS','ICSA.NS','IDBIGOLD.NS','IFBIND.NS','IFGLREFRA.NS','IGARASHI.NS','IIFLNIFTY.NS','IL&FSENGG.NS','IL&FSTRAN.NS','IMFA.NS','IMPAL.NS','INDBANK.NS','INDIABULL.NS','INDIABULL.NS','INDIAGLYC.NS','INDIANHUM.NS','INDLMETER.NS','INDNIPPON.NS','INDOCO.NS','INDORAMA.NS','INDOTECH.NS','INDOTHAI.NS','INDOWIND.NS','INDRAMEDC.NS','INDSWFTLA.NS','INDSWFTLT.NS','INDTERRAI.NS','INDUSFILA.NS','INFOMEDIA.NS','INFOTECEN.NS','INFRABEES.NS','INGERRAND.NS','INGVYSYAB.NS','INNOIND.NS','INOXLEISU.NS','INSECTICI.NS','IOLCP.NS','IPCALAB.NS','IPGETF.NS','IPRINGLTD.NS','ISFT.NS','ISMTLTD.NS','ITDCEM.NS','ITI.NS','IVC.NS','J&KBANK.NS','JAGRAN.NS','JAGSNPHAR.NS','JAICORPLT.NS','JAIHINDPR.NS','JAMNAAUTO.NS','JAYAGROGN.NS','JAYBARMAR.NS','JAYNECOIN.NS','JAYSREETE.NS','JBCHEPHAR.NS','JBFIND.NS','JBMA.NS','JENSONICO.NS','JHS.NS','JINDALPHO.NS','JINDALPOL.NS','JINDALSWH.NS','JINDCOT.NS','JINDRILL.NS','JISLDVREQ.NS','JKCEMENT.NS','JKIL.NS','JKLAKSHMI.NS','JKPAPER.NS','JKTYRE.NS','JMCPROJEC.NS','JMFINANCI.NS','JMTAUTOLT.NS','JOCIL.NS','JPINFRATE.NS','JSL.NS','JUBILANT.NS','JUBLINDS.NS','JUNIORBEE.NS','JVLAGRO.NS','JYOTHYLAB.NS','JYOTISTRU.NS','JYOTISTRU.NS','KABRAEXTR.NS','KAJARIACE.NS','KALECONSU.NS','KALINDEE.NS','KALPATPOW.NS','KAMATHOTE.NS','KANORICHE.NS','KANSAINER.NS','KARURVYSY.NS','KAVVERITE.NS','KBIL.NS','KCP.NS','KCPSUGIND.NS','KEC.NS','KECL.NS','KEI.NS','KEMROCK.NS','KERNEX.NS','KESORAMIN.NS','KFA.NS','KGL.NS','KHAITANEL.NS','KICL.NS','KIL.NS','KILITCH.NS','KINETICMO.NS','KIRLOSBRO.NS','KIRLOSENG.NS','KIRLOSIND.NS','KKCL.NS','KMSUGAR.NS','KNRCON.NS','KOHINOOR.NS','KOKUYOCML.NS','KOLTEPATI.NS','KOPRAN.NS','KOTAKGOLD.NS','KOTAKNIFT.NS','KOTAKPSUB.NS','KOTHARIPE.NS','KOTHARIPR.NS','KOUTONS.NS','KPIT.NS','KPRMILL.NS','KRBL.NS','KSBPUMPS.NS','KSCL.NS','KSE.NS','KSERASERA.NS','KSL.NS','KSOILS.NS','KWALITY.NS','L&TFH.NS','LAKPRE.NS','LAKSHMIEF.NS','LAKSHMIMI.NS','LAKSHVILA.NS','LANCOIN.NS','LAOPALA.NS','LAXMIMACH.NS','LCCINFOTE.NS','LGBBROSLT.NS','LGBFORGE.NS','LLOYDELEN.NS','LLOYDFIN.NS','LML.NS','LOGIXMICR.NS','LOKESHMAC.NS','LOTUSEYE.NS','LOVABLE.NS','LPDC.NS','LUMAXIND.NS','LUMAXTECH.NS','M&MFIN.NS','M100.NS','M50.NS','MADHAV.NS','MADHUCON.NS','MADRASCEM.NS','MADRASFER.NS','MAGMA.NS','MAGNUM.NS','MAHABANK.NS','MAHINDFOR.NS','MAHINDUGI.NS','MAHLIFE.NS','MAHSCOOTE.NS','MAHSEAMLE.NS','MANAKSIA.NS','MANALIPET.NS','MANDHANA.NS','MANGALAM.NS','MANGCHEFE.NS','MANGTIMBE.NS','MANINDS.NS','MANINFRA.NS','MANJEERA.NS','MANJUSHRE.NS','MANUGRAPH.NS','MARG.NS','MARICO.NS','MASTEK.NS','MAXWELL.NS','MBECL.NS','MBLINFRA.NS','MCX.NS','MEGASOFT.NS','MEGH.NS','MERCATOR.NS','MERCK.NS','METKORE.NS','MGOLD.NS','MHRIL.NS','MIC.NS','MICROSEC.NS','MICROTECH.NS','MINDAIND.NS','MIRCELECT.NS','MIRZAINT.NS','MMFL.NS','MMFSL.NS','MMTC.NS','MOIL.NS','MONNETISP.NS','MONSANTO.NS','MOREPENLA.NS','MOSERBAER.NS','MOTHERSUM.NS','MOTILALOF.NS','MOTOGENFI.NS','MPSLTD.NS','MRO-TEK.NS','MSPL.NS','MTEDUCARE.NS','MUKANDENG.NS','MUKANDLTD.NS','MUKTAARTS.NS','MUNJALSHO.NS','MURLIIND.NS','MURUDCERA.NS','MUTHOOTFI.NS','MVL.NS','MVLIND.NS','MYSOREBAN.NS','N100.NS','NAGREEKEX.NS','NAHARCAP.NS','NAHARINDU.NS','NAHARPOLY.NS','NAHARSPIN.NS','NANDANEXI.NS','NATCOPHAR.NS','NATHSEED.NS','NATIONALU.NS','NATNLSTEE.NS','NAVINFLUO.NS','NAVNETPUB.NS','NBCC.NS','NBVENTURE.NS','NDTV.NS','NECLIFE.NS','NELCAST.NS','NELCO.NS','NEPCMICON.NS','NESCO.NS','NESTLEIND.NS','NET4.NS','NETWORK18.NS','NEXTMEDIA.NS','NEYVELILI.NS','NFL.NS','NICCO.NS','NIFTYBEES.NS','NIITLTD.NS','NIITTECH.NS','NILKAMAL.NS','NIPPOBATR.NS','NITCO.NS','NITESHEST.NS','NITINFIRE.NS','NITINSPIN.NS','NOCIL.NS','NOIDATOLL.NS','NORBTEAEX.NS','NRBBEARIN.NS','NRC.NS','NUCLEUS.NS','OBEROIRLT.NS','OCL.NS','OILCOUNTU.NS','OISL.NS','OMAXAUTO.NS','OMAXE.NS','OMKARCHEM.NS','OMMETALS.NS','OMNITECH.NS','ONELIFECA.NS','ONWARDTEC.NS','ORBITCORP.NS','ORIENTABR.NS','ORIENTALT.NS','ORIENTBEL.NS','ORIENTHOT.NS','ORIENTLTD.NS','ORIENTPPR.NS','ORIENTREF.NS','ORISSAMIN.NS','PAEL.NS','PAGEIND.NS','PANACEABI.NS','PANAMAPET.NS','PANCARBON.NS','PANORAMUN.NS','PAPERPROD.NS','PARABDRUG.NS','PARACABLE.NS','PARAPRINT.NS','PARASPETR.NS','PARSVNATH.NS','PATINTLOG.NS','PDPL.NS','PDUMJEPUL.NS','PENIND.NS','PENINLAND.NS','PERSISTEN.NS','PETRONENG.NS','PFIZER.NS','PFOCUS.NS','PFS.NS','PGHH.NS','PHILIPCAR.NS','PHOENIXLT.NS','PIDILITIN.NS','PIIND.NS','PIPAVAVDO.NS','PIRGLASS.NS','PITTILAM.NS','PLASTIBLE.NS','PLETHICO.NS','PNBGILTS.NS','PNC.NS','POCHIRAJU.NS','POLYMED.NS','POLYPLEX.NS','PONDYOXID.NS','PONNIEROD.NS','PPAP.NS','PRADIP.NS','PRAKASH.NS','PRAKASHCO.NS','PRAKASHST.NS','PRATIBHA.NS','PRECOT.NS','PRECWIRE.NS','PREMIER.NS','PRESTIGE.NS','PRETAILDV.NS','PRIMESECU.NS','PRISMCEM.NS','PRITHVI.NS','PSB.NS','PSL.NS','PSUBNKBEE.NS','PTL.NS','PUNJABCHE.NS','PURVA.NS','PVR.NS','QGOLDHALF.NS','QNIFTY.NS','RADAAN.NS','RADICO.NS','RAINBOWPA.NS','RAINCOM.NS','RAJESHEXP.NS','RAJOIL.NS','RAJPALAYA.NS','RAJTV.NS','RAJVIR.NS','RALLIS.NS','RAMANEWS.NS','RAMCOIND.NS','RAMCOSYS.NS','RAMSARUP.NS','RANEENGIN.NS','RANEHOLDI.NS','RATNAMANI.NS','RBL.NS','RBN.NS','RCF.NS','REDINGTON.NS','REIAGROLT.NS','RELAXO.NS','RELBANK.NS','RELGOLD.NS','RELGRNIFT.NS','RELIGARE.NS','RELIGAREG.NS','RELMEDIA.NS','REPRO.NS','RESPONIND.NS','REVATHI.NS','RICOAUTO.NS','RIIL.NS','RJL.NS','RKDL.NS','RKFORGE.NS','RMCL.NS','RML.NS','ROHITFERR.NS','ROHLTD.NS','ROMAN.NS','RPPINFRA.NS','RSYSTEMS.NS','RUBYMILLS.NS','RUCHINFRA.NS','RUCHIRA.NS','RUPA.NS','RUSHIL.NS','SABTN.NS','SADBHAV.NS','SAGCEM.NS','SAHPETRO.NS','SAKSOFT.NS','SAKUMA.NS','SALORAINT.NS','SALSTEEL.NS','SAMBANDAM.NS','SANDESH.NS','SANGAMIND.NS','SANGHIIND.NS','SANGHVIFO.NS','SANGHVIMO.NS','SANOFI.NS','SARDAEN.NS','SAREGAMA.NS','SARLAPOLY.NS','SASKEN.NS','SATHAISPA.NS','SATYAMCOM.NS','SAVERA.NS','SB&TINTL.NS','SBBJ.NS','SBIGETS.NS','SBT.NS','SCHNEIDER.NS','SEAMECLTD.NS','SEINV.NS','SELAN.NS','SERVALL.NS','SESHAPAPE.NS','SGJHL.NS','SHAKTIPUM.NS','SHARIABEE.NS','SHARONBIO.NS','SHARRESLT.NS','SHASUNPHA.NS','SHILPAMED.NS','SHIV-VANI.NS','SHLAKSHMI.NS','SHOPERSTO.NS','SHREEASHT.NS','SHREECEM.NS','SHREERAMA.NS','SHRENUJ.NS','SHRIRAMCI.NS','SHRIRAMEP.NS','SHYAMTEL.NS','SICAGEN.NS','SICAL.NS','SIGNETIND.NS','SILINV.NS','SIMPLEX.NS','SIMPLEXIN.NS','SIRPAPER.NS','SITASHREE.NS','SIYSIL.NS','SJVN.NS','SKFINDIA.NS','SKMEGGPRO.NS','SKSMICRO.NS','SMARTLINK.NS','SMLISUZU.NS','SMPL.NS','SMSPHARMA.NS','SOFTTECHG.NS','SOLARINDS.NS','SOMANYCER.NS','SONASTEER.NS','SONATSOFT.NS','SOTL.NS','SOUISPAT.NS','SPANCO.NS','SPARC.NS','SPECIALIT.NS','SPECTACLE.NS','SPIC.NS','SPMLINFRA.NS','SRF.NS','SRHHLINDS.NS','SRSLTD.NS','SSWL.NS','STAN.NS','STAR.NS','STCINDIA.NS','STEL.NS','STERTOOLS.NS','STYABS.NS','SUBEX.NS','SUBROS.NS','SUDAR.NS','SUDARSCHE.NS','SUJANAUNI.NS','SUMEETIND.NS','SUMMITSEC.NS','SUNCLAYTO.NS','SUNDARAM.NS','SUNDARMFI.NS','SUNDRMBRA.NS','SUNDRMFAS.NS','SUNFLAG.NS','SUNILHITE.NS','SUNTECK.NS','SUPER.NS','SUPPETRO.NS','SUPRAJIT.NS','SUPREMEIN.NS','SUPREMEIN.NS','SURAJDIAM.NS','SURANAIND.NS','SURANAT&P.NS','SURANAVEL.NS','SURYALAXM.NS','SURYAROSN.NS','SUTLEJTEX.NS','SUVEN.NS','SWANENERG.NS','SWARAJENG.NS','SYMPHONY.NS','SYNCOM.NS','TAJGVK.NS','TALBROAUT.NS','TALWALKAR.NS','TANLA.NS','TANTIACON.NS','TATAELXSI.NS','TATAINVES.NS','TATAMETAL.NS','TATASPONG.NS','TBZ.NS','TCI.NS','TCIDEVELO.NS','TDPOWERSY.NS','TECHNO.NS','TECHNOFAB.NS','TECPRO.NS','TEXINFRA.NS','TEXRAIL.NS','TFCILTD.NS','THANGAMAY.NS','THEBYKE.NS','THEMISMED.NS','THERMAX.NS','THOMASCOO.NS','TI.NS','TIDEWATER.NS','TIIL.NS','TIJARIA.NS','TIL.NS','TIMBOR.NS','TIMETECHN.NS','TIMKEN.NS','TINPLATE.NS','TIPSINDLT.NS','TNPETRO.NS','TNPL.NS','TODAYS.NS','TOKYOPLAS.NS','TORNTPHAR.NS','TORNTPOWE.NS','TREEHOUSE.NS','TRENT.NS','TRF.NS','TRIDENT.NS','TRIGYN.NS','TRIL.NS','TRITURBIN.NS','TRIVENI.NS','TTKHEALTH.NS','TUBEINVES.NS','TULSI.NS','TULSYAN.NS','TV18BRDCS.NS','TVSELECT.NS','TVSSRICHA.NS','TVTODAY.NS','TWILITAKA.NS','TWL.NS','UBENGG.NS','UBHOLDING.NS','UBL.NS','UCALFUEL.NS','UFLEX.NS','UGARSUGAR.NS','UNICHEMLA.NS','UNIENTER.NS','UNITEDBNK.NS','UNITY.NS','UNIVCABLE.NS','USHAMART.NS','USHERAGRO.NS','UTTAMSTL.NS','VADILALIN.NS','VAIBHAVGE.NS','VAKRANSOF.NS','VALECHAEN.NS','VALUEIND.NS','VARDHACRL.NS','VARUNSHIP.NS','VASCONEQ.NS','VASWANI.NS','VENKEYS.NS','VENUSREM.NS','VESUVIUS.NS','VGUARD.NS','VHL.NS','VIKASGLOB.NS','VINATIORG.NS','VINDHYATE.NS','VIPUL.NS','VISAKAIND.NS','VISASTEEL.NS','VISESHINF.NS','VISUINTL.NS','VIVIMEDLA.NS','VOLTAMP.NS','VSSL.NS','VSTIND.NS','VSTTILLER.NS','VTL.NS','VTXIND.NS','WABAG.NS','WABCOINDI.NS','WENDT.NS','WHEELS.NS','WHIRLPOOL.NS','WILLAMAGO.NS','WOCKPHARM.NS','WSTCSTPAP.NS','WYETH.NS','XCHANGING.NS','XLENERGY.NS','XPROINDIA.NS','ZANDUREAL.NS','ZENITHBIR.NS','ZENITHINF.NS','ZENSARTEC.NS','ZICOM.NS','ZODIACLOT.NS','ZUARIAGRO.NS','ZYDUSWELL.NS','ZYLOG.NS','ABAN.NS','ABB.NS','ABIRLANUV.NS','ACC.NS','ADANIENT.NS','ADANIPORT.NS','ADANIPOWE.NS','AIL.NS','ALBK.NS','ALOKTEXT.NS','AMBUJACEM.NS','ANDHRABAN.NS','APOLLOTYR.NS','ARVIND.NS','ASHOKLEY.NS','ASIANPAIN.NS','AUROPHARM.NS','AXISBANK.NS','BAJAJ-AUT.NS','BAJAJHIND.NS','BAJAJHLDN.NS','BALRAMCHI.NS','BANKBAROD.NS','BANKINDIA.NS','BATAINDIA.NS','BEL.NS','BEML.NS','BFUTILITI.NS','BGRENERGY.NS','BHARATFOR.NS','BHARTIART.NS','BHEL.NS','BHUSANSTL.NS','BIOCON.NS','BOMDYEING.NS','BOSCHLTD.NS','BPCL.NS','CAIRN.NS','CANBK.NS','CENTRALBK.NS','CENTURYTE.NS','CESC.NS','CHAMBLFER.NS','CIPLA.NS','CMC.NS','COALINDIA.NS','COLPAL.NS','COREEDUTE.NS','CROMPGREA.NS','CUMMINSIN.NS','DABUR.NS','DCB.NS','DELTACORP.NS','DENABANK.NS','DISHTV.NS','DIVISLAB.NS','DLF.NS','DRREDDY.NS','ECLERX.NS','EDUCOMP.NS','ESCORTS.NS','ESSAROIL.NS','EXIDEIND.NS','FEDERALBN.NS','FINANTECH.NS','FORTIS.NS','GAIL.NS','GESHIP.NS','GLAXO.NS','GMDCLTD.NS','GMRINFRA.NS','GODREJIND.NS','GRASIM.NS','GSPL.NS','GUJFLUORO.NS','GVKPIL.NS','HAVELLS.NS','HCC.NS','HCL-INSYS.NS','HCLTECH.NS','HDFC.NS','HDFCBANK.NS','HDIL.NS','HEROMOTOC.NS','HEXAWARE.NS','HINDALCO.NS','HINDOILEX.NS','HINDPETRO.NS','HINDUNILV.NS','HINDZINC.NS','IBREALEST.NS','ICICIBANK.NS','IDBI.NS','IDEA.NS','IDFC.NS','IFCI.NS','IGL.NS','INDHOTEL.NS','INDIACEM.NS','INDIAINFO.NS','INDIANB.NS','INDUSINDB.NS','INFY.NS','IOB.NS','IOC.NS','IRB.NS','ITC.NS','IVRCLINFR.NS','JETAIRWAY.NS','JINDALSAW.NS','JINDALSTE.NS','JISLJALEQ.NS','JPASSOCIA.NS','JPPOWER.NS','JSWENERGY.NS','JSWISPAT.NS','JSWSTEEL.NS','JUBLFOOD.NS','KOTAKBANK.NS','KTKBANK.NS','LICHSGFIN.NS','LITL.NS','LT.NS','LUPIN.NS','M&M.NS','MARUTI.NS','MAX.NS','MCDOWELL-.NS','MCLEODRUS.NS','MINDTREE.NS','MPHASIS.NS','MRF.NS','MRPL.NS','MTNL.NS','NAGAROIL.NS','NAUKRI.NS','NCC.NS','NHPC.NS','NMDC.NS','NTPC.NS','OFSS.NS','OIL.NS','ONGC.NS','ONMOBILE.NS','OPTOCIRCU.NS','ORCHIDCHE.NS','ORIENTBAN.NS','PANTALOON.NS','PATELENG.NS','PETRONET.NS','PFC.NS','PIRHEALTH.NS','PNB.NS','POLARIS.NS','POWERGRID.NS','PRAJIND.NS','PTC.NS','PUNJLLOYD.NS','RANBAXY.NS','RAYMOND.NS','RCOM.NS','RECLTD.NS','RELCAPITA.NS','RELIANCE.NS','RELINFRA.NS','RENUKA.NS','ROLTA.NS','RPOWER.NS','RUCHISOYA.NS','SAIL.NS','SBIN.NS','SCI.NS','SESAGOA.NS','SIEMENS.NS','SINTEX.NS','SKUMARSYN.NS','SOBHA.NS','SOUTHBANK.NS','SREINFRA.NS','SRTRANSFI.NS','STER.NS','STRTECH.NS','SUNPHARMA.NS','SUNTV.NS','SUZLON.NS','SYNDIBANK.NS','TATACHEM.NS','TATACOFFE.NS','TATACOMM.NS','TATAGLOBA.NS','TATAMOTOR.NS','TATAMTRDV.NS','TATAPOWER.NS','TATASTEEL.NS','TCS.NS','TECHM.NS','TITAN.NS','TTKPRESTI.NS','TTML.NS','TULIP.NS','TVSMOTOR.NS','UCOBANK.NS','ULTRACEMC.NS','UNIONBANK.NS','UNIPHOS.NS','UNITECH.NS','VIDEOIND.NS','VIJAYABAN.NS','VIPIND.NS','VOLTAS.NS','WELCORP.NS','WIPRO.NS','YESBANK.NS','ZEEL.NS')
selected_stock = st.selectbox('Select dataset for prediction', stocks)
st.write('Or enter manually')
selected_stock = st.text_input('Enter the stock symbol:', 'GOOG')

n_years = st.slider('Years of prediction:', 1, 4)
period = n_years * 365


@st.cache
def load_data(ticker):
    data = yf.download(ticker, START, TODAY)
    data.reset_index(inplace=True)
    return data

	
data_load_state = st.text('Loading data...')
data = load_data(selected_stock)
data_load_state.text('Loading data... done!')

st.subheader('Raw data')
st.write(data.tail())

# Plot raw data
def plot_raw_data():
	fig = go.Figure()
	fig.add_trace(go.Scatter(x=data['Date'], y=data['Open'], name="stock_open"))
	fig.add_trace(go.Scatter(x=data['Date'], y=data['Close'], name="stock_close"))
	fig.layout.update(title_text='Time Series data with Rangeslider', xaxis_rangeslider_visible=True)
	st.plotly_chart(fig)
	
plot_raw_data()

# Predict forecast with Prophet.
df_train = data[['Date','Close']]
df_train['Date'] = df_train['Date'].dt.tz_localize(None)
df_train = df_train.rename(columns={"Date": "ds", "Close": "y"})

m = Prophet()
m.fit(df_train)
future = m.make_future_dataframe(periods=period)
forecast = m.predict(future)

# Show and plot forecast
st.subheader('Forecast data')
st.write(forecast.tail())
    
st.write(f'Forecast plot for {n_years} years')
fig1 = plot_plotly(m, forecast)
st.plotly_chart(fig1)

st.write("Forecast components")
fig2 = m.plot_components(forecast)
st.write(fig2)

# hide stuff for production deployment.
# Comment the following lines to enable debug 
# mode for the dev build
hide_debug_info = """
            <style>
            #MainMenu {visibility: hidden;}
            footer {visibility: hidden;}
            .viewerBadge_container__1QSob {visibility: hidden;}
            .viewerBadge_link__1S137 {visibility: hidden;}
            </style>
            """
st.markdown(hide_debug_info, unsafe_allow_html=True) 
